<!DOCTYPE html>
<html>

<head>
    <title>Home Theater Automation Configuration Page</title>
    <link rel="stylesheet" type="text/css" href="/web/styles.css">
    <script src="https://unpkg.com/htmx.org@1.6.1"></script>
    <script src="/web/app.js"></script>
</head>

<body>
    <div class="container">
        <h1>Home Theater Automation Configuration Page</h1>
        <h4>Remember to hit save</h4>
        <h4>You don't need quotes for anything</h4>

        <form id="ezbeqForm">

            <!-- Main Section -->
            <h2>Main</h2>
            <div>
                <label for="listenport">Listen Port
                    <span class="description">
                        The port on which the main service will listen for incoming connections.
                    </span>

                </label>
                <input type="text" id="listenport" name="main.listenport">
            </div>

            <!-- EZBeq Section -->
            <h2>EZBeq</h2>
            <div>
                <label for="ezbeq-enabled">Enabled
                    <span class="description">
                        Use EzBEQ
                    </span>
                </label>

                <input type="checkbox" id="ezbeq-enabled" name="ezbeq.enabled">
            </div>
            <div id="ezbeq-section">
                <div>
                    <label for="ezbeq-adjustmastervolumewithprofile">Adjust Master Volume With Profile
                        <span class="description">
                            Every BEQ profile has a MV adjustment. Most lower the MV, I recommend this on.
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-adjustmastervolumewithprofile"
                        name="ezbeq.adjustmastervolumewithprofile">
                </div>
                <div>
                    <label for="ezbeq-denonip">Denon AVR IP address
                        <span class="description">
                            IP Address for your AVR - "x.x.x.x"
                        </span>
                    </label>

                    <input type="text" id="ezbeq-denonip" name="ezbeq.denonip">
                </div>
                <div>
                    <label for="ezbeq-denonport">Denon AVR Port
                        <span class="description">
                            Port for your AVR (23)
                        </span>
                    </label>

                    <input type="text" id="ezbeq-denonport" name="ezbeq.denonport">
                </div>
                <div>
                    <label for="ezbeq-dryrun">Dryrun
                        <span class="description">
                            Keep EzBEQ in dryrun mode
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-dryrun" name="ezbeq.dryrun">
                </div>
                <div>
                    <label for="ezbeq-enabletvbeq">TV BEQ
                        <span class="description">
                            Check TV media types for BEQ
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-enabletvbeq" name="ezbeq.enabletvbeq">
                </div>
                <div>
                    <label for="ezbeq-notifyendpointname">Notify Endpoint
                        <span class="description">
                            Name of the Home Assistant notify endpoint (like your phone)
                        </span>
                    </label>

                    <input type="text" id="ezbeq-notifyendpointname" name="ezbeq.notifyendpointname">
                </div>
                <div>
                    <label for="ezbeq-notifyonload">Notify On Load
                        <span class="description">
                            Notify you on BEQ Load/Unload/Issues
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-notifyonload" name="ezbeq.notifyonload">
                </div>
                <div>
                    <label for="ezbeq-port">EzBEQ Port
                        <span class="description">
                            EzBEQ Port
                        </span>
                    </label>

                    <input type="text" id="ezbeq-port" name="ezbeq.port">
                </div>
                <div>
                    <label for="ezbeq-preferredauthor">BEQ Preferred Author
                        <span class="description">
                            Which Author to filter BEQ results by. Recommend leaving blank
                        </span>
                    </label>

                    <input type="text" id="ezbeq-preferredauthor" name="ezbeq.preferredauthor">
                </div>
                <div>
                    <label for="ezbeq-slots">MiniDSP Slots
                        <span class="description">
                            Which slot(s) to load into
                        </span>
                    </label>
                    <div id="slots">
                        <input type="checkbox" id="slot1" name="slots" value="1"> 1
                        <input type="checkbox" id="slot2" name="slots" value="2"> 2
                        <input type="checkbox" id="slot3" name="slots" value="3"> 3
                        <input type="checkbox" id="slot4" name="slots" value="4"> 4
                    </div>
                </div>
                <div>
                    <label for="ezbeq-stopplexifmismatch">Stop Plex On Mismatch
                        <span class="description">
                            Send a Stop to Plex if its transcoding incorrectly
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-stopplexifmismatch" name="ezbeq.stopplexifmismatch">
                </div>
                <div>
                    <label for="ezbeq-url">EzBEQ URL
                        <span class="description">
                            EzBEQ URL - "http://x.x.x.x" <- Must have http:// </span>
                    </label>

                    <input type="text" id="ezbeq-url" name="ezbeq.url">
                </div>
                <div>
                    <label for="ezbeq-useavrcodecsearch">Use AVR For Codec Lookup
                        <span class="description">
                            Use a supported AVR to get the codec instead of Plex metadata. More accurate, but slower
                        </span>
                    </label>

                    <input type="checkbox" id="ezbeq-useavrcodecsearch" name="ezbeq.useavrcodecsearch">
                </div>
            </div>
            <!-- HomeAssistant Section -->
            <!-- HomeAssistant Section -->
            <!-- HomeAssistant Section -->
            <!-- HomeAssistant Section -->
            <h2>HomeAssistant</h2>
            <div>
                <label for="homeassistant-enabled">Enabled
                    <span class="description">
                        Use Home Assistant features
                    </span>
                </label>

                <input type="checkbox" id="homeassistant-enabled" name="homeassistant.enabled">
            </div>
            <div id="homeassistant-section">
                <div>
                    <label for="homeassistant-url">Home Assistant URL
                        <span class="description">
                            URL - "http://x.x.x.x" <- Must have http:// </span>
                    </label>

                    <input type="text" id="homeassistant-url" name="homeassistant.url">
                </div>
                <div>
                    <label for="homeassistant-port">Home Assistant port
                        <span class="description">
                            port - "8123"
                        </span>
                    </label>

                    <input type="text" id="homeassistant-port" name="homeassistant.port">
                </div>
                <div>
                    <label for="homeassistant-token">Home Assistant token
                        <span class="description">
                            token - "ey.xyz" get a token from your user profile
                        </span>
                    </label>

                    <input type="text" id="homeassistant-token" name="homeassistant.token">
                </div>

                <div>
                    <label for="homeassistant-triggeraspectratiochangeonevent">Trigger Aspect Ratio Change On Event
                        <span class="description">
                            Send state change to MQTT when aspect ratio is detected on play
                        </span>
                    </label>

                    <input type="checkbox" id="homeassistant-triggeraspectratiochangeonevent"
                        name="homeassistant.triggeraspectratiochangeonevent">
                </div>
                <div>
                    <label for="homeassistant-triggerlightsonevent">Trigger Light Change On Event
                        <span class="description">
                            Send state change to MQTT when play/pause/stop for lights
                        </span>
                    </label>

                    <input type="checkbox" id="homeassistant-triggerlightsonevent"
                        name="homeassistant.triggerlightsonevent">
                </div>
                <div>
                    <label for="homeassistant-triggeravrmastervolumechangeonevent">Trigger Volume Change On Event
                        <span class="description">
                            Send state change to MQTT when play/pause/stop for volume based on movie or tv
                        </span>
                    </label>

                    <input type="checkbox" id="homeassistant-triggeravrmastervolumechangeonevent"
                        name="homeassistant.triggeravrmastervolumechangeonevent">
                </div>
                <div>
                    <label for="homeassistant-remoteentityname">Remote Entity Name
                        <span class="description">
                            Optional if using hdmi sync via an entity. the name of the remote entities, or a binary
                            sensor.
                            If binary sensor, set source.source to "binary_sensor". See readme
                        </span>
                    </label>
                    <input type="text" id="homeassistant-remoteentityname" name="homeassistant.remoteentityname">
                </div>

                <div>
                    <label for="homeassistant-playscriptname">Play Script Name
                        <span class="description">
                            optional: set only if plex.enabled is false. names of scripts which call Home assistant
                            scripts
                            to play/pause/stop
                        </span>
                    </label>
                    <input type="text" id="homeassistant-playscriptname" name="homeassistant.playscriptname">
                </div>
                <div>
                    <label for="homeassistant-pausescriptname">Pause Script Name
                        <span class="description">
                            optional: set only if plex.enabled is false. names of scripts which call Home assistant
                            scripts
                            to play/pause/stop
                        </span>
                    </label>
                    <input type="text" id="homeassistant-pausescriptname" name="homeassistant.pausescriptname">
                </div>
                <div>
                    <label for="homeassistant-stopscriptname">Stop Script Name
                        <span class="description">
                            optional: set only if plex.enabled is false. names of scripts which call Home assistant
                            scripts
                            to play/pause/stop
                        </span>
                    </label>
                    <input type="text" id="homeassistant-stopscriptname" name="homeassistant.stopscriptname">
                </div>
            </div>

            <!-- MQTT Section -->
            <h2>MQTT</h2>
            <div>
                <label for="mqtt-enabled">Enabled MQTT
                    <span class="description">
                        Enable the use of MQTT
                    </span>
                </label>

                <input type="checkbox" id="mqtt-enabled" name="mqtt.enabled">
            </div>
            <div>
                <label for="mqtt-url">MQTT URL with port
                    <span class="description">
                        URL - "http://x.x.x.x:1883" <- Must have http:// </span>
                </label>

                <input type="text" id="mqtt-url" name="mqtt.url">
            </div>
            <div>
                <label for="mqtt-username">Username
                    <span class="description">
                        Username for MQTT broker
                    </span>
                </label>
                <input type="text" id="mqtt-username" name="mqtt.username">
            </div>
            <div>
                <label for="mqtt-password">Password
                    <span class="description">
                        password for MQTT broker
                    </span>
                </label>
                <input type="text" id="mqtt-password" name="mqtt.password">
            </div>


            <div>
                <label for="mqtt-topiclights">Topic Lights
                    <span class="description">
                        Topic for light state
                    </span>
                </label>
                <input type="text" id="mqtt-topiclights" name="mqtt.topiclights">
            </div>

            <div>
                <label for="mqtt-topicvolume">Topic Volume
                    <span class="description">
                        Topic for volume state
                    </span>
                </label>
                <input type="text" id="mqtt-topicvolume" name="mqtt.topicvolume">
            </div>

            <div>
                <label for="mqtt-topicaspectratio">Topic Aspect Ratio
                    <span class="description">
                        Topic for Aspect Ratio state
                    </span>
                </label>
                <input type="text" id="mqtt-topicaspectratio" name="mqtt.topicaspectratio">
            </div>

            <div>
                <label for="mqtt-topicbeqcurrentprofile">Topic BEQ Profile
                    <span class="description">
                        Topic for current profile
                    </span>
                </label>
                <input type="text" id="mqtt-topicbeqcurrentprofile" name="mqtt.topicbeqcurrentprofile">
            </div>

            <div>
                <label for="mqtt-topicminidspmutestatus">Topic MiniDSP
                    <span class="description">
                        Topic for MiniDSP mute state
                    </span>
                </label>
                <input type="text" id="mqtt-topicminidspmutestatus" name="mqtt.topicminidspmutestatus">
            </div>

            <div>
                <label for="mqtt-topicplayingstatus">Topic Playing
                    <span class="description">
                        Topic for plex Playing state
                    </span>
                </label>
                <input type="text" id="mqtt-topicplayingstatus" name="mqtt.topicplayingstatus">
            </div>


            <!-- Plex Section -->
            <h2>Plex</h2>
            <div>
                <label for="plex-enabled">Enabled
                    <span class="description">
                        Use plex
                    </span>
                </label>

                <input type="checkbox" id="plex-enabled" name="plex.enabled">
            </div>
            <div id="plex-section">
                <div>
                    <label for="plex-url">Plex URL
                        <span class="description">
                            URL - "http://x.x.x.x" <- Must have http:// </span>
                    </label>

                    <input type="text" id="plex-url" name="plex.url">
                </div>
                <div>
                    <label for="plex-port">Plex port
                        <span class="description">
                            port - "32400"
                        </span>
                    </label>

                    <input type="text" id="plex-port" name="plex.port">
                </div>
                <div>
                    <label for="plex-ownernamefilter">Owner Name Filter
                        <span class="description">
                            Your main owner account, will filter webhooks so others don't trigger
                            leave blank if you don't want to filter on accounts
                        </span>
                    </label>
                    <input type="text" id="plex-ownernamefilter" name="plex.ownernamefilter">
                </div>
                <div>
                    <label for="plex-deviceuuidfilter">Device UUID Filter
                        <span class="description">
                            The client identifier of the device to filter webhooks for. You should set this to your
                            theater player UUID, or a comma separated string (filter1,filter2) if you have multiple
                            devices. If blank, it will not filter anything. Get your UUID from logs after playing
                            something or https://plex.tv/devices.xml after signing in
                        </span>
                    </label>
                    <input type="text" id="plex-deviceuuidfilter" name="plex.deviceuuidfilter">
                </div>
                <div>
                    <label for="plex-playermachineidentifier">Player Machine Identifier
                        <span class="description">
                            optional if not using hdmi sync get this from "http://(player ip):32500/resources". Required
                            for pausing/playing plex . check readme
                        </span>
                    </label>
                    <input type="text" id="plex-playermachineidentifier" name="plex.playermachineidentifier">
                </div>
                <div>
                    <label for="plex-playerip">Player IP
                        <span class="description">
                            optional if not using hdmi sync IP of your player device (like a shield)
                        </span>
                    </label>
                    <input type="text" id="plex-playerip" name="plex.playerip">
                </div>

                <div>
                    <label for="plex-enabletrailersupport">Enable Trailer Support
                        <span class="description">
                            if you enable trailers before movies, it can process it like turn off lights. no beq
                        </span>
                    </label>

                    <input type="checkbox" id="plex-enabletrailersupport" name="plex.enabletrailersupport">
                </div>

            </div>
            <!-- jellyfin Section -->
            <h2>jellyfin</h2>
            <div>
                <label for="jellyfin-enabled">Enabled
                    <span class="description">
                        Use jellyfin
                    </span>
                </label>

                <input type="checkbox" id="jellyfin-enabled" name="jellyfin.enabled">
            </div>
            <div id="jellyfin-section">
                <div>
                    <label for="jellyfin-url">jellyfin URL
                        <span class="description">
                            URL - "http://x.x.x.x" <- Must have http:// </span>
                    </label>

                    <input type="text" id="jellyfin-url" name="jellyfin.url">
                </div>
                <div>
                    <label for="jellyfin-port">jellyfin port
                        <span class="description">
                            port - "32400"
                        </span>
                    </label>

                    <input type="text" id="jellyfin-port" name="jellyfin.port">
                </div>
                <div>
                    <label for="jellyfin-ownernamefilter">Owner Name Filter
                        <span class="description">
                            Your main owner account, will filter webhooks so others don't trigger
                            leave blank if you don't want to filter on accounts
                        </span>
                    </label>
                    <input type="text" id="jellyfin-ownernamefilter" name="jellyfin.ownernamefilter">
                </div>
                <div>
                    <label for="jellyfin-deviceuuidfilter">Device UUID Filter
                        <span class="description">
                            The client identifier of the device to filter webhooks for. You should set this to your
                            theater player UUID, or a comma separated string (filter1,filter2) if you have multiple
                            devices. If blank, it will not filter anything. Get your UUID from logs after playing
                            something or https://jellyfin.tv/devices.xml after signing in
                        </span>
                    </label>
                    <input type="text" id="jellyfin-deviceuuidfilter" name="jellyfin.deviceuuidfilter">
                </div>
                <div>
                    <label for="jellyfin-playermachineidentifier">Player Machine Identifier
                        <span class="description">
                            optional if not using hdmi sync get this from "http://(player ip):32500/resources". Required
                            for pausing/playing jellyfin . check readme
                        </span>
                    </label>
                    <input type="text" id="jellyfin-playermachineidentifier" name="jellyfin.playermachineidentifier">
                </div>
                <div>
                    <label for="jellyfin-playerip">Player IP
                        <span class="description">
                            optional if not using hdmi sync IP of your player device (like a shield)
                        </span>
                    </label>
                    <input type="text" id="jellyfin-playerip" name="jellyfin.playerip">
                </div>

                <div>
                    <label for="jellyfin-apiToken">Enable Trailer Support
                        <span class="description">
                            if you enable trailers before movies, it can process it like turn off lights. no beq
                        </span>
                    </label>

                    <input type="text" id="jellyfin-apiToken" name="jellyfin.apiToken">
                </div>

            </div>

            <!-- Signal Section -->
            <h2>HDMI Signal Sync</h2>
            <div>
                <label for="signal-enabled">Enable HDMI Signal Sync
                    <span class="description">
                        if you want to pause plex until hdmi sync is done
                    </span>
                </label>

                <input type="checkbox" id="signal-enabled" name="signal.enabled">
            </div>
            <div>
                <label for="signal-source">Source
                    <span class="description">
                        jvc, envy, or name of the binary sensor (see readme), or you can specify seconds to pause for
                        like 13
                    </span>
                </label>
                <input type="text" id="signal-source" name="signal.source">
                <!-- <select id="signal-source" name="signal.source">
                    <option value="jvc">JVC</option>
                    <option value="envy">Envy</option>
                    <option value="binary_sensor">Binary Sensor</option>
                    <option value="mqtt">MQTT</option>
                </select> -->
            </div>
            <!-- Save Button -->
            <div>
                <button id="saveButton" type="submit">Save</button>
                <span id="notification"></span>
            </div>
        </form>
    </div>
</body>

</html>